import{_ as g,o as l,c as n,d as t,F as i,f as h,g as I,t as r,h as m,v as C}from"./index-8af8bdf4.js";const{VITE_APP_URL:u,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"aaronshih04263test",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},b={data(){return{message:"Hello Vue!",products:[],productId:"",cart:[],loadingItem:""}},methods:{getCarts(){this.$http.get(`${u}/v2/api/${_}/cart`).then(e=>{console.log("購物車:",e.data.data),this.cart=e.data.data}).catch(e=>{console.log(e)})},updateCartItem(e){const s={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,console.log(s,e.id),this.$http.put(`${u}/v2/api/${_}/cart/${e.id}`,{data:s}).then(c=>{console.log("更新購物車:",c.data),this.getCarts(),this.loadingItem=""}).catch(c=>{console.log(c)})},deleteCartItem(e){this.loadingItem=e.id,this.$http.delete(`${u}/v2/api/${_}/cart/${e.id}`).then(s=>{console.log("刪除購物車:",s.data),this.getCarts(),this.loadingItem=""}).catch(s=>{console.log(s)})}},mounted(){this.getCarts(),console.log(this)}},v={class:"table align-middle"},y=t("th",null,null,-1),P=t("th",null,"品名",-1),V=t("th",{style:{width:"150px"}},"數量/單位",-1),f=t("th",null,"單價",-1),$=[y,P,V,f],k=["onClick","disabled"],x={class:"input-group input-group-sm"},E=["onUpdate:modelValue","onChange","disabled"],A=["value"],T={class:"text-end"},D=t("td",{colspan:"3",class:"text-end"},"總計",-1),U={class:"text-end"};function q(e,s,c,B,d,p){return l(),n("table",v,[t("thead",null,[(l(!0),n(i,null,h(e.carts,o=>(l(),n("tr",{key:o.id},$))),128))]),t("tbody",null,[d.cart.carts?(l(!0),n(i,{key:0},h(d.cart.carts,o=>(l(),n("tr",{key:o.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>p.deleteCartItem(o),disabled:o.id===d.loadingItem}," x ",8,k)]),t("td",null,r(o.product.title)+" ",1),t("td",null,[t("div",x,[m(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":a=>o.qty=a,onChange:a=>p.updateCartItem(o),disabled:o.id===d.loadingItem},[(l(),n(i,null,h(20,a=>t("option",{value:a,key:a+"123456789"},r(a),9,A)),64))],40,E),[[C,o.qty]])])]),t("td",T,r(o.total),1)]))),128)):I("",!0)]),t("tfoot",null,[t("tr",null,[D,t("td",U,r(d.cart.total),1)])])])}const R=g(b,[["render",q]]);export{R as default};
